<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>Student Records Dashboard</h1>
<a href="/add">âž• Add Student</a> | <a href="/logout">Logout</a>

<table>
<tr>
    <th>Rank</th>
    <th>Name</th>
    <th>Roll</th>
    <th>Percentage</th>
    <th>Grade</th>
</tr>
{% for s in students %}
<tr>
    <td>{{ loop.index }}</td>
    <td>{{ s[0] }}</td>
    <td>{{ s[1] }}</td>
    <td>{{ "%.2f"|format(s[2]) }}%</td>
    <td>{{ s[3] }}</td>
</tr>
{% endfor %}
</table>

<h2>ðŸ“Š Performance Graph</h2>
<canvas id="chart"></canvas>

<script>
new Chart(document.getElementById("chart"), {
    type: "bar",
    data: {
        labels: {{ names | safe }},
        datasets: [{
            label: "Percentage",
            data: {{ percentages | safe }},
            backgroundColor: [
                "#e74c3c", "#3498db", "#2ecc71",
                "#9b59b6", "#f1c40f", "#1abc9c"
            ]
        }]
    },
    options: {
        responsive: true,
        plugins: {
            tooltip: { enabled: true },
            legend: { display: false }
        },
        scales: {
            y: { beginAtZero: true, max: 100 }
        }
    }
});
</script>

</body>
</html>
